<?php
if (!defined('BASEPATH')) exit('No direct script access allowed');class Pro_database extends MX_Controller{ protected $_3323476a9900; protected $_098d7f812cc7; function __construct() { $this->_3323476a9900 = & get_instance(); $this->_098d7f812cc7 = new Modules(); } public function get_custom($_fdb56d8887af, $_873ad6e33ac3 = 1000, $_d7bd4bb72461 = 0) { $_19cbaf8918f0 = $this->_3323476a9900->db->query($_fdb56d8887af . ' LIMIT ' . $_873ad6e33ac3 . ' OFFSET ' . $_d7bd4bb72461); if ($_19cbaf8918f0->num_rows() < 1) { $_19cbaf8918f0->free_result(); return FALSE; } return $_19cbaf8918f0; } public function _insert($_72ce3b99baf5, $_a1cde6663b22) { $this->_3323476a9900->db->insert($_72ce3b99baf5, $_a1cde6663b22); return $this->_3323476a9900->db->insert_id(); } public function _update($_72ce3b99baf5, $_a1cde6663b22, $_f6987041d891, $_870a7ab1e16a = false) { $this->_3323476a9900->db->where($_f6987041d891); if ($_870a7ab1e16a) { foreach ($_a1cde6663b22 as $_7708b2ac12c6 => $_03e6c542de67) { $this->_3323476a9900->db->set($_7708b2ac12c6, $_03e6c542de67, false); } return $this->_3323476a9900->db->update($_72ce3b99baf5); } else return $this->_3323476a9900->db->update($_72ce3b99baf5, $_a1cde6663b22); } public function _delete($_72ce3b99baf5, $_f6987041d891) { $this->_3323476a9900->db->where($_f6987041d891); $this->_3323476a9900->db->delete($_72ce3b99baf5); } public function find($_fdb56d8887af) { if (isset($_fdb56d8887af['where'])) $this->_3323476a9900->db->where($_fdb56d8887af['where']); if (isset($_fdb56d8887af['where_in'])) $this->_3323476a9900->db->where_in($_fdb56d8887af['where_in']); if (isset($_fdb56d8887af['where_not_in'])) $this->_3323476a9900->db->where_not_in($_fdb56d8887af['where_not_in']); if (isset($_fdb56d8887af['join'])) foreach ($_fdb56d8887af['join'] as $_a4c22d817422) {  $this->_3323476a9900->db->join($_a4c22d817422[0], $_a4c22d817422[1], $_a4c22d817422[2]); } $_c1444e1d4fc5 = 0; if (isset($_fdb56d8887af['like'])) { $_00d04651f659 = isset($_fdb56d8887af['is_or_like']); $_9e89de06fdac = ''; foreach ($_fdb56d8887af['like'] as $_a4c22d817422) { if (isset($_fdb56d8887af['inside_brackets'])) { if ($_9e89de06fdac == '') $_9e89de06fdac .= '(' . $_a4c22d817422[0] . ' LIKE "%' . $_a4c22d817422[1] . '%"'; else $_9e89de06fdac .= ' OR ' . $_a4c22d817422[0] . ' LIKE "%' . $_a4c22d817422[1] . '%"'; continue; }  if ($_c1444e1d4fc5 == 0 || !$_00d04651f659) $this->_3323476a9900->db->like($_a4c22d817422[0], $_a4c22d817422[1]); else $this->_3323476a9900->db->or_like($_a4c22d817422[0], $_a4c22d817422[1]);  $_c1444e1d4fc5++; } if (isset($_fdb56d8887af['inside_brackets'])) { $_9e89de06fdac .= ')'; $this->_3323476a9900->db->where($_9e89de06fdac, null, false); } } if (isset($_fdb56d8887af['orderby'])) $this->_3323476a9900->db->order_by($_fdb56d8887af['orderby']); if (isset($_fdb56d8887af['field'])) $this->_3323476a9900->db->select($_fdb56d8887af['field']); if (isset($_fdb56d8887af['groupby'])) $this->_3323476a9900->db->group_by($_fdb56d8887af['groupby']); if (isset($_fdb56d8887af['having'])) $this->_3323476a9900->db->having($_fdb56d8887af['having']); if (isset($_fdb56d8887af['limit']) && isset($_fdb56d8887af['offset'])) $this->_3323476a9900->db->limit($_fdb56d8887af['limit'], $_fdb56d8887af['offset']); $_19cbaf8918f0 = $this->_3323476a9900->db->get($_fdb56d8887af['table']); if ($_19cbaf8918f0->num_rows() < 1) { $_19cbaf8918f0->free_result(); return FALSE; } return $_19cbaf8918f0; } public function count_all($_fdb56d8887af) { if (isset($_fdb56d8887af['field'])) $this->_3323476a9900->db->select($_fdb56d8887af['field']); if (isset($_fdb56d8887af['where'])) $this->_3323476a9900->db->where($_fdb56d8887af['where']); if (isset($_fdb56d8887af['join'])) foreach ($_fdb56d8887af['join'] as $_a4c22d817422) $this->_3323476a9900->db->join($_a4c22d817422[0], $_a4c22d817422[1], $_a4c22d817422[2]); $_c1444e1d4fc5 = 0; if (isset($_fdb56d8887af['like'])) { $_00d04651f659 = isset($_fdb56d8887af['is_or_like']); $_9e89de06fdac = ''; foreach ($_fdb56d8887af['like'] as $_a4c22d817422) { if (isset($_fdb56d8887af['inside_brackets'])) { if ($_9e89de06fdac == '') $_9e89de06fdac .= '(' . $_a4c22d817422[0] . ' LIKE "%' . $_a4c22d817422[1] . '%"'; else $_9e89de06fdac .= ' OR ' . $_a4c22d817422[0] . ' LIKE "%' . $_a4c22d817422[1] . '%"'; continue; } if ($_c1444e1d4fc5 == 0 || !$_00d04651f659) $this->_3323476a9900->db->like($_a4c22d817422[0], $_a4c22d817422[1]); else $this->_3323476a9900->db->or_like($_a4c22d817422[0], $_a4c22d817422[1]); $_c1444e1d4fc5++; } if (isset($_fdb56d8887af['inside_brackets'])) { $_9e89de06fdac .= ')'; $this->_3323476a9900->db->where($_9e89de06fdac, null, false); } } if (isset($_fdb56d8887af['groupby'])) $this->_3323476a9900->db->group_by($_fdb56d8887af['groupby']); $_19cbaf8918f0 = $this->_3323476a9900->db->from($_fdb56d8887af['table']); return $this->_3323476a9900->db->count_all_results(); } function random_find($_11337b446460, $_fa51285b3d29='', $_1c4b343afc51='', $_03e6c542de67 = ''){ $_fdb56d8887af = array( 'table' => $_11337b446460, 'field' => $_fa51285b3d29, 'where' => !is_array($_1c4b343afc51)? array($_1c4b343afc51 => $_03e6c542de67) : $_1c4b343afc51, 'limit' => 1, 'orderby' => 'rand()', 'offset' => 0); if ($_fa51285b3d29 == '*' || empty($_fa51285b3d29)) unset($_fdb56d8887af['field']); if (empty($_1c4b343afc51) && empty($_03e6c542de67)) unset($_fdb56d8887af['where']); $_71f745ef35f3 = $this->find($_fdb56d8887af); if (!empty($_71f745ef35f3)) { if ($_fa51285b3d29 == '*' || empty($_fa51285b3d29)) { return $_71f745ef35f3->result(); } else { foreach ($_71f745ef35f3->result() as $_7708b2ac12c6 => $_94d198a1c342) { return $_94d198a1c342->$_fa51285b3d29; } } } else { return ''; }} public function mini_find( $_11337b446460, $_fa51285b3d29='', $_1c4b343afc51='', $_03e6c542de67 = '') { $_fdb56d8887af = array( 'table' => $_11337b446460, 'field' => $_fa51285b3d29, 'where' => !is_array($_1c4b343afc51)? array($_1c4b343afc51 => $_03e6c542de67) : $_1c4b343afc51, 'limit' => 1, 'offset' => 0); if ($_fa51285b3d29 == '*' || empty($_fa51285b3d29)) unset($_fdb56d8887af['field']); if (empty($_1c4b343afc51) && empty($_03e6c542de67)) unset($_fdb56d8887af['where']); $_71f745ef35f3 = $this->find($_fdb56d8887af); if (!empty($_71f745ef35f3)) { if ($_fa51285b3d29 == '*' || empty($_fa51285b3d29)) { return $_71f745ef35f3->result(); } else { foreach ($_71f745ef35f3->result() as $_7708b2ac12c6 => $_94d198a1c342) { return $_94d198a1c342->$_fa51285b3d29; } } } else { return ''; } } public function go($_2e3bd474fadd,$_a1cde6663b22='') { if(empty($_a1cde6663b22)){ return $this->_098d7f812cc7->run($_2e3bd474fadd); }else{ return $this->_098d7f812cc7->run($_2e3bd474fadd,$_a1cde6663b22); } } public function mini_find_lq($_11337b446460, $_fa51285b3d29='', $_1c4b343afc51='', $_03e6c542de67 = '') { $this->mini_find($_11337b446460, $_fa51285b3d29='', $_1c4b343afc51='', $_03e6c542de67 = ''); return $this->_3323476a9900->db->last_query(); } public function find_lq($_fdb56d8887af) { $this->find($_fdb56d8887af); return $this->_3323476a9900->db->last_query(); } public function count_all_lq($_fdb56d8887af) { $this->count_all($_fdb56d8887af); return $this->_3323476a9900->db->last_query(); } public function count_one_lq($_11337b446460, $_d17e72a239a2 = '') { $this->count_one($_11337b446460,$_d17e72a239a2); return $this->_3323476a9900->db->last_query(); } public function count_one($_11337b446460, $_d17e72a239a2 = '') { $_fdb56d8887af = array( 'table' => $_11337b446460, 'where' => $_d17e72a239a2 ); if (empty($_d17e72a239a2)) unset($_fdb56d8887af['where']); $_a1cde6663b22 = $this->find($_fdb56d8887af); return empty($_a1cde6663b22)? 0 : $this->find($_fdb56d8887af)->_c174422e6f2a; }
public function custom($query) {
    if ($this->db->simple_query($query))
    {
            return TRUE;
    }
    else
    {
            return FALSE;
    }
  }
}?>